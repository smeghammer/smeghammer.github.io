<!DOCTYPE HTML>
<html lang="en">
    <head>
        <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.3/build/pure-min.css" integrity="sha384-cg6SkqEOCV1NbJoCu11+bm0NvBRc8IYLRGXkmNrqUBfTjmMYwNKPWBTIKyw9mHNJ" crossorigin="anonymous">
        <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.3/build/grids-responsive-min.css">
        <link rel="stylesheet" href="/css/site.css">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" type="image/gif" href="/images/favicon.gif">
        <title>
        Smeghammer's Doom
        </title>
    </head>
    <body class="home" data-page="snippets" data-ytvid="true" data-pagekey="0.1.11">
        <div class="pure-g">
            <div class="pure-u-1 pure-u-md-1-8 pure-u-lg-1-12"></div>
            <div class="pure-u-1 pure-u-md-3-4 pure-u-lg-5-6">
                <h1 class="centre"></h1>
            </div>
            <div class="pure-u-1 pure-u-md-1-8 pure-u-lg-1-12"></div>
        </div>
        
        <!-- top menu -->
        <div class="pure-g">
            <div class="pure-u-1 pure-u-md-1-8 pure-u-lg-2-24"></div>
            <div class="pure-u-1 pure-u-md-3-4 pure-u-lg-20-24 menubar">
                <div class="pure-menu pure-menu-horizontal centre" id="menubar" >
                    <!-- inject menu -->
                </div>                <div id="subnav">
                    <!-- inject subnav here -->
                </div>
            </div>
            <div class="pure-u-1 pure-u-md-1-8 pure-u-lg-2-24"></div>
        </div>

        <!-- contents -->
        <div class="pure-g contents">
            <div class="pure-u-1 pure-u-md-1-12 pure-u-lg-1-8"></div>
            <div class="pure-u-1 pure-u-md-5-6   pure-u-lg-3-4">
                <h2></h2>
                <p>A better attempt at a gigantic nail.</p>
                <p>Slightly expanded to generalise the nail script. This was eventually improved to the fast version seen in my <a href="/maps/anitsotw.htm">Nail in the Skin of the World</a> map.</p>
                <img src="https://github.com/smeghammer/snippets/blob/master/nails2/screenshots/1.png?raw=true">
                <h3>Code in full</h3>
                <pre>
#library "myscripts.acs"
#include "zcommon.acs"

/* {3dsector,cut1,cut2,cut3,nailDist} */
int skinPeeler[3][5] = {{3,4,5,6,128},{11,8,9,10,128},{18,13,14,15,128}};

/*
SCRIPT 1:
---------
*/
script 1 (int nailId){
	log(s:"nail in...",i:skinPeeler[nailId][0],i:skinPeeler[nailId][1],i:skinPeeler[nailId][2],i:skinPeeler[nailId][3]);	
	// tag, speed, height
	//the nail
	Floor_LowerByValue(skinPeeler[nailId][0], 8, skinPeeler[nailId][4]);
	Ceiling_LowerByValue(skinPeeler[nailId][0],8,skinPeeler[nailId][4]);
	
	//the skin
	int counter = 0;
	while(counter < 200){
		counter = counter+1;
		if(counter == 35){
			Floor_LowerInstant(skinPeeler[nailId][1],0,16);
		}
		if(counter == 70){
			Floor_LowerInstant(skinPeeler[nailId][2],0,16);
		}
		if(counter == 105){
			Floor_LowerInstant(skinPeeler[nailId][3],0,16);
		}
		Delay(1);
	}
}
                </pre>
                <p>In this case, the S1 line action also passes an argument of nailId. This is an index for the data lookup array (skinPeeler). This data array holds the control sector ID (the nail head), the tags of the
                bits of flesh to expand and the distance the nail descends.</p>
                <ul>
                    <li><a href="https://github.com/smeghammer/snippets/blob/master/nails2/compiled/nails2.pk3?raw=true">Download example PK3</a></li>
                    <li><a href="https://github.com/smeghammer/snippets/tree/master/nails2">Github</a></li>
                </ul>
                
                
            </div>

            <div class="pure-u-1 pure-u-md-1-12 pure-u-lg-1-8"></div>
        </div>
        
        <!-- inject footer -->
        <div id="footer"></div>
        <script src="/js/jquery.js"></script>
        <script src="/js/site.js"></script> 
    </body>
</html>
